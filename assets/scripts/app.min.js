var appREEF=function(a,b){var c=a.documentElement,d=null,e=function(){f()},f=function(){c.setAttribute("data-useragent",navigator.userAgent)},g=function(a){a?(b("#reefman_add_to_cart_btn").slideDown(),b("#reefman_reset_variations_btn").slideDown()):(b("#reefman_add_to_cart_btn").slideUp(),b("#reefman_reset_variations_btn").slideUp())},h=function(a,c){a?b(c).slideUp("fast",function(){b(c).prev().hide().removeClass("hide").slideDown("slow")}):b(c).prev().addClass("hide").hide("fast",function(){b(c).slideDown("slow")})},i=function(a){a?b("#nw_reefman .reefman_form").stop().fadeTo("slow",.01,function(){b("#nw_reefman ._loading").stop().slideDown("fast",function(){b("#nw_reefman ._single_variation").removeClass("active")})}):b("#nw_reefman ._loading").stop().slideUp("fast",function(){b("#nw_reefman .reefman_form").stop().fadeTo("slow",1)})},j=function(){var a=b("._single_variation").length;b("._total_variations").text(a),parseInt(a)>0?(b("form.reefman_form ._no_product_selected").slideUp("fast"),g(!0),b("._total_variations").removeClass("secondary"),b("._total_variations").addClass("success")):(g(!1),b("._total_variations").addClass("secondary"),b("._total_variations").removeClass("success"),b("form.reefman_form ._no_product_selected").slideDown("slow"))},k=function(a){var c={},e=b("form.reefman_form").data("product-variations");c[b(a).data("attr-name")]=b(a).data("attr-value");var f=l(e,c).shift();if(f){var h=new FormData;h.append("action","add_variation_to_accordion"),h.append("product_id",d),h.append("variation_id",f.variation_id),h.append("test",'this"helper " is awk'),h.append("variation",JSON.stringify(f)),b.ajax({url:nw.ajaxurl,data:h,dataType:"html",cache:!1,contentType:!1,processData:!1,type:"POST",error:function(a,b,c){console.log("FATAL ERROR: "+JSON.stringify(a)+" "+b+" "+c)},success:function(a){b("form.reefman_form dl.accordion").append(a),j(),g(!0),i(!1)}})}else console.log("Couldn't find a variation!",f),i(!1)},l=function(a,b){for(var c=[],d=0;d<a.length;d++){{var e=a[d];e.variation_id}m(e.attributes,b)&&c.push(e)}return c},m=function(a,b){var c=!0;for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=b[d];void 0!==e&&void 0!==f&&0!==e.length&&0!==f.length&&e!==f&&(c=!1)}return c},n=function(a){var c=b(a)[0].files,e=new FormData;e.append("action","add_variation_image"),e.append("product_id",d),e.append("variation_image",c[0]),b.ajax({url:nw.ajaxurl,data:e,dataType:"json",cache:!1,contentType:!1,processData:!1,type:"POST",error:function(a,b,c){console.log("FATAL ERROR: "+JSON.stringify(a)+" "+b+" "+c)},success:function(c){var d="#image_variations_"+b(a).data("rand");"success"===c.state?(h(!1,a),b(a).next().val(c.attachment_id),b(a).hide("slow",function(){b(d).attr("src",c.attachment_src[0]),b(d).attr("width",c.attachment_src[1]),b(d).attr("height",c.attachment_src[2]),b(d).removeClass("hide").show("slow")})):(b(d).addClass("hide"),h(!1,a),b(a).val(""),console.log(c.message),console.log(c)),g(!0)}})},o=function(){var c=a.getElementById("reefman_form"),e=new FormData(c);e.append("action","add_product_variations_to_cart"),e.append("product_id",d),b.ajax({url:nw.ajaxurl,data:e,dataType:"json",cache:!1,contentType:!1,processData:!1,type:"POST",error:function(a,c,d){console.log("FATAL ERROR: "+JSON.stringify(a)+" "+c+" "+d),b("#reefman_add_to_cart_btn").prop("disabled",!1).removeClass("disabled").find("i").addClass("hide")},success:function(a){"success"===a.state?window.location.href=a.cart_url:(console.log("An error occured; do not process form."),console.log(a))}})};return{init:e,onSingleProductPage:function(){b("#nw_reefman ._loading").hide(),b("form.reefman_form").on("keyup keypress",function(a){var b=a.keyCode||a.which;return 13==b?(a.preventDefault(),console.log("Enter pressed; ignore form submit!"),!1):void 0}),d=parseInt(b("form.reefman_form").data("product-id")),b("#reefman_add_to_cart_btn").hide(),b("#reefman_reset_variations_btn").hide(),b("#nw_extended_calculations .nw_notifications").hide(),b("#nw_reefman").on("click","._add_product_variation",function(a){var b=a.target;i(!0),k(b),a.preventDefault()}),b("#nw_reefman").on("click",".image_elements ._set_attribute",function(a){a.preventDefault();var c=a.target,d=b(c).data("sets"),e=b(c).data("id");b(c).parents("ul").find("._set_attribute").not(c).each(function(){b(this).removeClass("selected")}),b(c).toggleClass("selected"),b('input[name="'+d+'"]').val(b(c).is(".selected")?e:"")}),b("form.reefman_form").on("change","._engraving",function(a){var c=a.target;b(c).parent().find("._engraving").each(function(){b(this).nextAll("input").first().addClass("hide")}),b(c).nextAll("input").first().removeClass("hide"),"text"===b(c).data("what")&&(b(c).parent().find("._uploading_image").addClass("hide"),b(c).parent().find("._uploading_image").next().addClass("hide").show().val(""),g(!0))}),b("form.reefman_form").on("change",'input[type="file"]',function(a){var b=a.target;g(!1),h(!0,b),n(b)}),b("#reefman_reset_variations_btn").click(function(a){a.preventDefault(),b("#nw_reefman ._single_variation").parent("dd").slideUp("slow",function(){b(this).remove(),j()})}),b("form.reefman_form").submit(function(a){a.preventDefault(),b("#reefman_add_to_cart_btn").prop("disabled",!0).addClass("disabled").find("i.hide").removeClass("hide"),o(!0)})}}}(document,jQuery);jQuery(document).ready(function(a){a(document).foundation(),appREEF.init(),a(".single").is(".single-product")&&appREEF.onSingleProductPage()});
//# sourceMappingURL=app.min.js.map